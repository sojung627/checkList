<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“ë˜ë¡ ì²´í¬ë¦¬ìŠ¤íŠ¸ğŸ“</title>
  
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  
  <style>
    /* ì „ì²´ ë””ìì¸ ìœ„ì¹˜ */
    body {
      font-family: 'Jua', sans-serif;
      background: #ffeef5;
      padding: 30px;
  	  color: #E7A1C4;
  	  max-width: 700px;   
  	  margin: 0 auto;     
    } 
     
    /* ì œëª© */
    h1 {
      color: #ff6699;
      margin-bottom: 10px;
    }
    
    #inputBox {
      width: 250px;
      padding: 8px;
      border: 1px solid #ff99bb;
      border-radius: 8px;
      outline: none;
    }
    
    #addBtn {
      padding: 8px 14px;
      margin-left: 4px;
      background: #ff99bb;
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }
    
    .item {
      display: flex;
      align-items: center;
      margin-top: 10px;
      background: white;
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #ffd1e0;
      user-select: none;
 	  cursor: grab;
 	  max-width: 600px;
  	  width: 100%;
    }
    
    /* ì»¤ì„œê°€ ì† ëª¨ì–‘ìœ¼ë¡œ */
    .item:active {
	  cursor: grabbing;		
	}
    
    .item span {
      flex: 1;
      margin-left: 8px;
      /* ìë™ ê¸¸ì´ ì¶”ê°€ */
      white-space: normal;
  	  word-break: break-word;
    }
    
    /* ì‚­ì œ ë²„íŠ¼ */
    .deleteBtn {
      background: none;
      border: none;
      cursor: pointer;
      color: #ff5c8a;
      font-weight: bold;
    }
    
    /* ì²´í¬ë°•ìŠ¤ ê¸°ë³¸ ìˆ¨ê¸°ê¸° */
	.item input[type="checkbox"] {
	  appearance: none;
	  -webkit-appearance: none;
	  width: 22px;
	  height: 22px;
	  border: 2px solid #ff99bb;
	  border-radius: 6px;
	  cursor: pointer;
	  margin-right: 10px;
	  position: relative;
	  outline: none;
	  background: white;
	}
	
	/* ì²´í¬ëì„ ë•Œ */
	.item input[type="checkbox"]:checked {
	  background: #ff77aa;
	  border-color: #ff77aa;
	}
	
	/* ì²´í¬ í‘œì‹œ ëª¨ì–‘ */
	.item input[type="checkbox"]:checked::after {
	  content: 'âœ”';
	  color: white;
	  font-size: 16px;
	  position: absolute;
	  top: -1px;
	  left: 3px;
	  font-weight: bold;
	}
	
	/* ìŠ¤í¬ë¡¤ë°” ì „ì²´ */
	::-webkit-scrollbar {
	  width: 10px;
	}
	
	/* ìŠ¤í¬ë¡¤ë°” íŠ¸ë™ (ë°°ê²½) */
	::-webkit-scrollbar-track {
	  background: #ffe6f2; /* ì—°í•‘í¬ */
	  border-radius: 10px;
	}
	
	/* ìŠ¤í¬ë¡¤ë°” ë§‰ëŒ€ */
	::-webkit-scrollbar-thumb {
	  background: #ff99c8; /* ì§„í•‘í¬ */
	  border-radius: 10px;
	  border: 2px solid #ffe6f2;
	}
	
	/* ìŠ¤í¬ë¡¤ë°” ë§‰ëŒ€ hover */
	::-webkit-scrollbar-thumb:hover {
	  background: #ff6fb8; /* ë” ì§„í•œ í•‘í¬ */
	}
    
  </style>
  

  
</head>

<body>
		  <h1>ğŸ“ë˜ë¡ ì²´í¬ë¦¬ìŠ¤íŠ¸ğŸ“</h1>
	  
	  <input id="inputBox" type="text" placeholder="í•  ì¼ ì ê¸°ğŸ’—">
	  <button id="addBtn">ì¶”ê°€</button>
	
	  <div id="list"></div>


  <script>
    const input = document.getElementById("inputBox");
    const list = document.getElementById("list");
    const addBtn = document.getElementById("addBtn");
    
    // ì—”í„°í‚¤ ëˆ„ë¥´ë©´ ìë™ ì¶”ê°€
    input.addEventListener("keydown", (e) => {
    	  if (e.key === "Enter") {
    	    addBtn.click();
    	  }
    	});

    // ì €ì¥ëœ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = () => {
      const saved = JSON.parse(localStorage.getItem("todo")) || [];
      saved.forEach(addItem);
    };

    function save() {
      const items = [];
      document.querySelectorAll(".item").forEach(i => {
        items.push({
          text: i.querySelector("span").innerText,
          checked: i.querySelector("input").checked
        });
      });
      localStorage.setItem("todo", JSON.stringify(items));
    }

    function addItem(data) {
      const div = document.createElement("div");
      div.className = "item";
      
      // ìœ„ì¹˜ ì •ë ¬
      div.draggable = true;

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = data.checked || false;
      checkbox.onchange = save;

      const text = document.createElement("span");
      text.innerText = data.text;
      
      // ë”ë¸”í´ë¦­ - ìˆ˜ì •í•˜ê¸° ê¸°ëŠ¥ ì¶”ê°€
      text.addEventListener("dblclick", () => {
    	    const newText = prompt("ìˆ˜ì •í•  ë‚´ìš©ì„ ì…ë ¥í•´ì¤˜ğŸ’—", text.innerText);
    	    if (newText !== null && newText.trim() !== "") {
    	      text.innerText = newText;
    	      save();
    	    }
    	  });  

      const del = document.createElement("button");
      del.className = "deleteBtn";
      del.innerText = "Ã—";
      del.onclick = () => {
        div.remove();
        save();
      };

      div.appendChild(checkbox);
      div.appendChild(text);
      div.appendChild(del);
      list.appendChild(div);
    }
    
    // ë“œë˜ê·¸ ê¸°ëŠ¥
    let dragItem = null;

	list.addEventListener("dragstart", (e) => {
	  dragItem = e.target;
	  setTimeout(() => e.target.style.opacity = "0.3", 0);
	});
	
	list.addEventListener("dragend", (e) => {
	  e.target.style.opacity = "1";
	  dragItem = null;
	  save();
	});
	
	list.addEventListener("dragover", (e) => {
	  e.preventDefault();
	  const target = e.target.closest(".item");
	  if (target && target !== dragItem) {
	    const rect = target.getBoundingClientRect();
	    const middle = rect.y + rect.height / 2;
	    const next = e.clientY > middle;
	    list.insertBefore(dragItem, next ? target.nextSibling : target);
	  }
	});
    
	// ì—”í„° í‚¤ - ìë™ ì €ì¥ ê¸°ëŠ¥
    addBtn.onclick = () => {
      if (input.value.trim() !== "") {
        addItem({ text: input.value, checked: false });
        save();
        input.value = "";
      }
    };
  </script>
</body>
</html>